=== test_impl_failed_struct_receiver
--- main.n
type person_t = struct{
    string name
}

fn person_t.to_string(&self):string {
    return self.name
}

fn main() {
    var p = person_t{
        name: 'xiaoming',
    }

    var result = p.to_string()
    println(result)
}

--- output.txt
nature-test/main.n:14:19: type mismatch: method requires `ref<main.person_t(struct)>` receiver, got `main.person_t(struct)`

=== test_impl_failed_ptr_receiver
--- main.n
type person_t = struct{
    string name
}

fn person_t.to_string(&self):string {
    return self.name
}

fn main() {
    var p = person_t{
        name: 'xiaoming',
    }

    var result = (&p).to_string()
    println(result)
}

--- output.txt
nature-test/main.n:14:22: type mismatch: method requires `ref<main.person_t(struct)>` receiver, got `ptr<main.person_t(struct)>`

=== test_impl_ref_receiver
--- main.n
type person_t = struct{
    string name
}

fn person_t.to_string(&self):string {
    return self.name
}

fn main() {
    ref<person_t> p = new person_t()
    p.name = 'xiaoming'

    var result = p.to_string()
    println(result)
}

--- output.txt
xiaoming

=== test_impl_scalar_ref_receiver
--- main.n
import fmt

fn int.to_string(&self):string {
    return fmt.sprintf('%d', *self)
}

fn main() {
    var p = new int(12)
    println(p.to_string())
}

--- output.txt
12
